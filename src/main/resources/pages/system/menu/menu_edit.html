<%layout("/common/_container.html"){%><div class="layui-fluid" id="app" style="background:white;">    <form id="menuForm" lay-filter="menuForm" class="layui-form model-form">        <input name="menuId" type="hidden" value="${parameter.menuId}"/>        <div class="layui-form-item">            <label class="layui-form-label">上级菜单</label>            <div class="layui-input-block">                <select name="parentId" lay-search>                    <option value="">请选择上级菜单</option>                    <option value="0">顶级</option>                    <option v-for="item in menu" :value="item.id">{{item.title}}</option>                </select>            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">菜单名称</label>            <div class="layui-input-block">                <input name="menuName" placeholder="请输入菜单名称" type="text" class="layui-input" maxlength="50"                       lay-verType="tips" lay-verify="required" required/>            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">权限类型</label>            <div class="layui-input-block">                <input name="type" type="radio" value="0" title="菜单" checked/>                <input name="type" type="radio" value="1" title="权限"/>            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">菜单url</label>            <div class="layui-input-block">                <input name="url" placeholder="请输入菜单url" type="text" class="layui-input"/>            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">权限标识</label>            <div class="layui-input-block">                <input name="perms" placeholder="请输入权限标识" type="text" class="layui-input"/>            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">菜单图标</label>            <div class="layui-input-block">                <div style="width: 80px;height: 50px;"  class="user-info-head" @click="choose" readonly >                    <span style="line-height: 40px;color: #777777;margin-left:10px;" v-show="!info.icon" >请选择</span>                    <i style="margin-left:10px; line-height: 40px; font-size: 25px;" class="layui-icon" :class="info.icon" v-show="info.icon"></i>                </div>                <input type="hidden" name="icon" :value="info.icon">            </div>        </div>        <div class="layui-form-item">            <label class="layui-form-label">排序号</label>            <div class="layui-input-block">                <input name="orderNum" placeholder="请输入排序号" type="number" class="layui-input" min="0" max="1000"                       lay-verType="tips" lay-verify="required|number" required/>            </div>        </div>        <div class="layui-form-item text-right">            <button class="layui-btn layui-btn-primary" type="button" ew-event="closeDialog">取消</button>            <button class="layui-btn" lay-filter="menuFrom" lay-submit>保存</button>        </div>    </form></div><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:{},            menu:'',        },        methods: {            choose:function () {                top.layui.admin.open({                    area:["60%","70%"],                    type: 2,                    title: '选择图标',                    content: '/admin/common/choose_icon',                    resize:true,                    success:function(layero, index){                        var iframe = $(layero).find("iframe")[0].contentWindow;                        iframe.getICon(function (icon) {                            Vue.set(vm.info,'icon',icon);                            top.layer.close(index);                        })                    }                });            }        },        mounted:async function() {            vm = this;            this.menu = await api.getMenulist();            var menuId = '${parameter.menuId}';            if(!app.isEmpty(menuId)){               vm.info = await api.getMenuDetail(menuId);               form.val('menuForm', vm.info);            }            form.on('submit(menuFrom)', function (data) {                api.editMenu(data.field).then(res=>{                    //传给上个页面，刷新table用                    admin.putTempData('formOk', true);                    //关掉对话框                    admin.closeThisDialog();                });                return false;            });            admin.iframeAuto();            form.render();        },        updated: function () {            form.render();        }    })</script><% } %>