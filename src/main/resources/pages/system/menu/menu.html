<%layout("/common/_container.html"){%><div class="layui-fluid" id="app">        <div class="layui-col-md12">            <div class="layui-card">                <div class="layui-card-body">                    <div class="layui-form toolbar">                        <div class="layui-form-item">                            <div class="layui-inline">                                <input id="condition" class="layui-input" type="text" placeholder="名称"/>                            </div>                            <div class="layui-inline">                                <button type="button" id="btnSearch" class="layui-btn icon-btn"><i class="layui-icon">&#xe615;</i>搜索</button>                                <button type="button" id="btnAdd" class="layui-btn icon-btn" @click="open"><i class="layui-icon">&#xe654;</i>添加</button>                                <button type="button" @click="insTb.expandAll();" class="layui-btn  layui-btn-primary">                                    <i class="layui-icon">&#xe668;</i>展开全部                                </button>                                <button type="button" @click="insTb.foldAll();" id="btnFoldAll" class="layui-btn  layui-btn-primary">                                    <i class="layui-icon">&#xe66b;</i>折叠全部                                </button>                            </div>                        </div>                    </div>                    <table class="layui-table" id="TreeTable" lay-filter="TreeTable"></table>                </div>            </div>        </div>    </div></div><!-- 表格操作列 --><script type="text/html" id="TableBar">    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">修改</a>    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a></script><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:'',            tree:''        },        methods: {            open:function () {                admin.putTempData('formOk', false);                top.layui.admin.open({                    type: 2,                    title: '添加菜单',                    content: 'menu/menu_edit',                    end:function () {                        admin.getTempData('formOk') && location.reload();                    }                });            }        },        mounted:async function() {            vm = this;            vm.tree = await api.getMenuTableTree();            layui.use(['treeTable'], function () {                var treeTable = layui.treeTable;                // 渲染表格                vm.insTb = treeTable.render({                    elem: '#TreeTable',                    data: vm.tree,                    height: 'full-150',                    tree: {                        iconIndex: 0,                        idName: 'menuId',  // 自定义id字段的名称                        getIcon: function (d) {                            if (d.children) {                                return '<i class="ew-tree-icon ew-tree-icon-folder"></i>';                            } else {                                return '<i class="ew-tree-icon ew-tree-icon-file"></i>';                            }                        }                    },                    cols: [                        {field: 'menuName', title: '菜单名', width: 200},                        {field: 'url', title: '请求地址', width: 200},                        {field: 'perms', title: '权限标识', width: 160},                        {field: 'type', title: '类型', width: 160,templet(d){                                return d.type==0?'菜单':'权限'                            }},                        {field: 'icon', title: '图标', width: 160,templet(d){                            return '<i class="layui-icon '+d.icon+'" style="font-size: 25px;">'                            }},                        {field: 'orderNum', title: '排序', width: 160},                        {field: 'createTime', title: '创建时间', width: 180},                        {field: 'modifyTime', title: '修改时间', width: 180},                        {align: 'center', toolbar: '#TableBar', title: '操作'}                    ],                    style: 'margin-top:0;'                });                treeTable.on('tool(TreeTable)', function (obj) {                    var event = obj.event;                    var data = obj.data;                    if (event == 'del') {                        app.confirm("确定删除吗",function () {                            api.deleteMenu(data).then(res=>{                                app.success("删除成功")                                location.reload();                            })                        })                    } else if (event == 'edit') {                        admin.putTempData('formOk', false);                        top.layui.admin.open({                            type: 2,                            title: '修改',                            content: '${domain}/admin/menu/menu_edit?menuId='+data.menuId,                            resize:true,                            end:function () {                                admin.getTempData('formOk') && location.reload();                            }                        });                    }                });                vm.insTb.expandAll();            });        },        updated: function () {        }    })</script><% } %>