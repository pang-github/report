<%layout("/common/_container.html"){%><div class="layui-fluid" id="app">        <div class="layui-col-md12">            <div class="layui-card">                <div class="layui-card-body">                    <div class="layui-form toolbar">                        <div class="layui-form-item">                            <div class="layui-inline">                                <input  v-model="condition" class="layui-input" type="text" placeholder="名称"/>                            </div>                            <div class="layui-inline">                                <button type="button" @click="tableReload" class="layui-btn icon-btn"><i class="layui-icon">&#xe615;</i>搜索</button>                                <button type="button" @click="tableReload('reset')" class="layui-btn icon-btn"><i class="layui-icon">&#xe669;</i>重置</button>                                <button type="button" @click="btnAdd" class="layui-btn icon-btn"><i class="layui-icon">&#xe654;</i>添加</button>                            </div>                        </div>                    </div>                    <table class="layui-table" id="roleTable" lay-filter="roleTable"></table>                </div>            </div>        </div></div><script type="text/html" id="tableBar">    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">修改</a>    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>    <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="roleAssign">权限配置</a></script><script>    var  initColumn =  [[        {type: 'checkbox'},        {field: 'roleId', hide: true, title: 'ROLE_ID'},        {field: 'name',title: '角色名称'},        {field: 'memo',title: '角色描述'},        {field: 'createTime',title: '创建时间'},        {align: 'center', toolbar: '#tableBar', title: '操作'}    ]];    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:'',            condition:''        },        methods: {            btnAdd:function () {                admin.putTempData('formOk', false);                top.layui.admin.open({                    type: 2,                    title: '添加角色',                    content: '/admin/role/role_edit',                    end:function () {                        admin.getTempData('formOk') && vm.tableReload();                    }                });            },            tableReload:function (action) {                if(action=='reset'){ vm.condition='' };                table.reload('roleTable', {where: {                        name:vm.condition                    },page:{ curr:1 }});            }        },        mounted:async function() {            vm = this;            table.render({                elem: '#roleTable',                url: '/admin/role/getRoleList',                page: true,                height: "full-105",                cellMinWidth: 100,                cols: initColumn            });            table.on('tool(roleTable)', function (obj) {                var event = obj.event;                var data = obj.data;                if (event == 'del') {                    app.confirm("确定删除吗?",function () {                        api.delRole(data).then(res=>{                            app.success("删除成功！")                            vm.tableReload();                        })                    })                } else if (event == 'edit') {                    admin.putTempData('formOk', false);                    top.layui.admin.open({                        type: 2,                        title: '修改',                        content: '/admin/role/role_edit?roleId='+data.roleId,                        end:function () {                            admin.getTempData('formOk') && vm.tableReload();                        }                    });                } else if (event == 'roleAssign') {                    admin.putTempData('formOk', false);                    top.layui.admin.open({                        type: 2,                        area: ['300px', '450px'], //宽高                        fix: false,                        maxmin: true,                        title: '权限配置',                        content: '/admin/role/role_menu?roleId='+data.roleId,                        end:function () {                            admin.getTempData('formOk') && vm.tableReload();                        }                    });                }            });            form.render();        },        updated: function () {            form.render();        }    })</script><% } %>