<% layout("/common/_container.html"){ %><div class="layui-fluid" id="app">    <div class="layui-row layui-col-space15">    <div class="layui-col-md6">        <div class="layui-card">            <div class="layui-card-body">                <div class="layui-form toolbar">                    <div class="layui-form-item">                        <div class="layui-inline">                            <input v-model="condition" class="layui-input" type="text" placeholder="名称"/>                        </div>                        <div class="layui-inline">                            <button type="button" @click="tableReload" class="layui-btn icon-btn"><i class="layui-icon">&#xe615;</i>搜索</button>                            <button type="button" @click="tableReload('reset')" class="layui-btn icon-btn" ><i class="layui-icon">&#xe669;</i>重置</button>                            <button type="button" @click="back" class="layui-btn icon-btn layui-btn-warm"><i class="layui-icon">ဆ</i>关闭</button>                        </div>                    </div>                </div>                <table class="layui-table" id="taskdetailTable" lay-filter="taskdetailTable"></table>            </div>        </div>    </div>        <div class="layui-col-md6" >            <div class="layui-card">                <div class="layui-card-body" style="height: calc(100vh - 65px); overflow: scroll" >                    <div v-if="data">                        <form class="layui-form">                            <table class="layui-table" >                                <colgroup>                                    <col width="20%">                                    <col width="20%">                                    <col width="20%">                                    <col>                                    <col width="10%">                                </colgroup>                                <thead>                                <tr>                                    <th>序号</th>                                    <th>随访项目</th>                                    <th>随访结果</th>                                </tr>                                </thead>                                <tbody>                                <template v-for="(item,index) in tplList">                                    <tr>                                        <td>{{index+1}}</td>                                        <td><input class="layui-input" type="text" v-model="item.title"/></td>                                        <td>                                            <input class="layui-input" type="text" v-if="item.type==1" v-model="item.answer"/>                                            <template v-if="item.type==2">                                                <input type="radio" name="project"  :value="radio.option" :title="radio.option" :checked="radio.ischecked" v-for="radio in item.option">                                            </template>                                            <template v-if="item.type==3">                                                <input type="checkbox" name="like" lay-skin="primary" :title="chebox.option" :checked="chebox.ischecked" v-for="chebox in item.option">                                            </template>                                            <template v-if="item.type==4">                                                <select :data-index="index" v-model="item.answer">                                                    <option></option>                                                    <option v-for="select in item.option">{{select}}</option>                                                </select>                                            </template>                                            <template v-if="item.type==5">                                                <textarea class="layui-textarea" v-model="item.answer"></textarea>                                            </template>                                        </td>                                    </tr>                                </template>                                </tbody>                            </table>                        </form>                    </div>                </div>            </div>        </div>    </div></div><script type="text/html" id="tableBar">    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a></script><script>    var initColumn =  [[        {type: 'radio'},        {field:'id',title:'',hide:true},        {field:'taskId',title:'任务id',hide:true},        {field:'taskName',title:'任务名'},        {field:'patientName',title:'患者姓名'},        {field:'patientId',title:'患者id',hide:true},        {field:'content',title:'随访内容',hide:true},        {field:'result',title:'随访结果',hide:true},        {field:'createTime',title:'开始时间'},        {field:'modifyTime',title:'修改时间'},        {align: 'center', toolbar: '#tableBar', title: '操作'}    ]];    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            condition:'',            data:'',            tplList:[],        },        methods: {            btnAdd:function () {                location.href = 'taskdetail_edit';            },            tableReload:function (action) {                if(action=='reset'){ vm.condition='' };                var queryData = {                    taskId:vm.condition,                    patientName:vm.condition,                    patientId:vm.condition,                };                table.reload('taskdetailTable',{                    where: queryData, page: {                        curr: 1 //重新从第 1 页开始                    }});            },            back:function () {                location.href = '/admin/taskQuartz/taskQuartz_list';            }        },        mounted:async function() {            vm = this;            table.render({                elem: '#taskdetailTable',                url: 'getTaskdetailList',                page: true,                height: "full-105",                cellMinWidth: 100,                cols: initColumn,                where:{                    taskId:app.getUrlParam("taskId")                }            });            table.on('row(taskdetailTable)', function (obj) {                vm.data = obj.data;                console.log(vm.data);                if(vm.data.result){                    vm.tplList = JSON.parse(vm.data.result)                }            });            table.on('tool(taskdetailTable)', function (obj) {                var event = obj.event;                var data = obj.data;                if (event == 'del') {                    app.confirm("确定删除吗?",function () {                        request.fetch("delTaskdetail",{id:data.id}).then(res=>{                            app.success("删除成功！")                            vm.tableReload();                        })                    })                } else if (event == 'edit') {                    location.href = 'taskdetail_edit?id='+data.id;                }            });            form.render();        },        updated: function () {            form.render();        }    })</script><% } %>