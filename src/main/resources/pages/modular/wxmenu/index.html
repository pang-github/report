<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <title></title>    <link rel="stylesheet" href="/plugin/layui/css/layui.css" media="all">    <link href="/plugin/wx/css/bootstrap.min.css" rel="stylesheet">    <link href="/plugin/wx/css/menu.css" rel="stylesheet">    <script src="/plugin/layui/layui.all.js"></script>    <script src="/plugin/vue/axios.min.js"></script>    <script src="/plugin/vue/qs.min.js"></script>    <script src="/common/js/request.js?v=${version}"></script>    <script src="/common/js/common.js?v=${version}"></script></head><body><div class="content" style="width:900px;margin:60px auto 0px;">    <div id="app-menu">        <!-- 预览窗 -->        <div class="weixin-preview">            <div class="weixin-hd">                <div class="weixin-title">{{weixinTitle}}</div>            </div>            <div class="weixin-bd">                <ul class="weixin-menu" id="weixin-menu" >                    <li v-for="(btn,i) in menu.button" class="menu-item" :class="{current:selectedMenuIndex===i&&selectedMenuLevel()==1}" @click="selectedMenu(i,$event)">                        <div class="menu-item-title">                            <i class="icon_menu_dot"></i>                            <span>{{ btn.name }}</span>                        </div>                        <ul class="weixin-sub-menu" v-show="selectedMenuIndex===i">                            <li v-for="(sub,i2) in btn.sub_button" class="menu-sub-item" :class="{current:selectedSubMenuIndex===i2&&selectedMenuLevel()==2}"  @click.stop="selectedSubMenu(i2,$event)">                                <div class="menu-item-title">                                    <span>{{sub.name}}</span>                                </div>                            </li>                            <li v-if="btn.sub_button.length<5" class="menu-sub-item" @click.stop="addMenu(2)">                                <div class="menu-item-title">                                    <i class="icon14_menu_add"></i>                                </div>                            </li>                            <i class="menu-arrow arrow_out"></i>                            <i class="menu-arrow arrow_in"></i>                        </ul>                    </li>                    <li class="menu-item" v-if="menu.button.length<3" @click="addMenu(1)"> <i class="icon14_menu_add"></i></li>                </ul>            </div>        </div>        <!-- 主菜单 -->        <div class="weixin-menu-detail" v-if="selectedMenuLevel()==1">            <div class="menu-input-group" style="border-bottom: 2px #e8e8e8 solid;">                <div class="menu-name">{{menu.button[selectedMenuIndex].name}}</div>                <div class="menu-del" @click="delMenu(menu.button[selectedMenuIndex].buttonId,1)">删除菜单</div>            </div>            <div class="menu-input-group">                <div class="menu-label">菜单名称</div>                <div class="menu-input">                    <input type="text" name="name" placeholder="请输入菜单名称" class="menu-input-text" v-model="menu.button[selectedMenuIndex].name" @input="checkMenuName(menu.button[selectedMenuIndex].name)">                    <p class="menu-tips" style="color:#e15f63" v-show="menuNameBounds">字数超过上限</p>                    <p class="menu-tips">字数不超过4个汉字或8个字母</p>                </div>            </div>            <template v-if="menu.button[selectedMenuIndex].sub_button.length==0">                <div class="menu-input-group">                    <div class="menu-label">菜单内容</div>                    <div class="menu-input">                        <select v-model="menu.button[selectedMenuIndex].type" name="type" class="menu-input-text">                            <option value="text">普通文本(text)</option>                            <option value="view">跳转网页(view)</option>                            <option value="media_id">发送消息(media_id)</option>                            <option value="view_limited">跳转公众号图文消息链接(view_limited)</option>                            <option value="miniprogram">打开指定小程序(miniprogram)</option>                            <option value="click">自定义点击事件(click)</option>                        </select>                    </div>                </div>                <div class="menu-content" v-if="selectedMenuType()=='text'">                    <div class="menu-input-group">                        <p class="menu-tips">请输入要发送的内容</p>                        <div class="menu-label">内容</div>                        <div class="menu-input">                            <textarea @input="menu.button[selectedMenuIndex].key = 'text:'+ menu.button[selectedMenuIndex].buttonId"  class="layui-textarea" v-model="menu.button[selectedMenuIndex].content" autocomplete="off"></textarea>                        </div>                    </div>                </div>                <div class="menu-content" v-if="selectedMenuType()==1">                    <div class="menu-input-group">                        <p class="menu-tips">订阅者点击该子菜单会跳到以下链接</p>                        <div class="menu-label">页面地址</div>                        <div class="menu-input">                            <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].url">                        </div>                    </div>                </div>                <div class="menu-msg-content" v-else-if="selectedMenuType()==2">                    <div class="menu-msg-head"><i class="icon_msg_sender"></i>图文消息</div>                    <div class="menu-msg-panel">                        <div class="menu-msg-select" style="cursor: pointer;" v-if="menu.button[selectedMenuIndex].media_id==''||menu.button[selectedMenuIndex].media_id==undefined" @click="selectMaterialId">                            <i class="icon36_common add_gray"></i>                            <strong>从素材库中选择</strong>                        </div>                        <div class="menu-msg-select" v-else>                            <i class="icon_msg_sender"></i>{{menu.button[selectedMenuIndex].materialTitle}}                            <a :href="menu.button[selectedMenuIndex].materialUrl" target="_blank" class="btn btn-sm btn-info">查看</a>                            <div class="btn btn-sm btn-danger" @click="delMaterialId">删除</div>                        </div>                    </div>                </div>                <div class="menu-content" v-else-if="selectedMenuType()==3">                    <div class="menu-input-group">                        <p class="menu-tips">用于消息接口推送，不超过128字节</p>                        <div class="menu-label">菜单KEY值</div>                        <div class="menu-input">                            <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].key">                        </div>                    </div>                </div>                <div class="menu-content" v-else-if="selectedMenuType()==4">                    <div class="menu-input-group">                        <p class="menu-tips">订阅者点击该子菜单会跳到以下小程序</p>                        <div class="menu-label">小程序APPID</div>                        <div class="menu-input">                            <input type="text" placeholder="小程序的appid（仅认证公众号可配置）" class="menu-input-text" v-model="menu.button[selectedMenuIndex].appid">                        </div>                    </div>                    <div class="menu-input-group">                        <div class="menu-label">小程序路径</div>                        <div class="menu-input">                            <input type="text" placeholder="小程序的页面路径 pages/Index/index" class="menu-input-text" v-model="menu.button[selectedMenuIndex].pagepath">                        </div>                    </div>                    <div class="menu-input-group">                        <div class="menu-label">备用网页</div>                        <div class="menu-input">                            <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].url">                            <p class="menu-tips">旧版微信客户端无法支持小程序，用户点击菜单时将会打开备用网页。</p>                        </div>                    </div>                </div>            </template>        </div>        <!-- 子菜单 -->        <div class="weixin-menu-detail" v-if="selectedMenuLevel()==2">            <div class="menu-input-group" style="border-bottom: 2px #e8e8e8 solid;">                <div class="menu-name">{{menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].name}}</div>                <div class="menu-del" @click="delMenu(menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].buttonId,2);">删除子菜单</div>            </div>            <div class="menu-input-group">                <div class="menu-label">子菜单名称</div>                <div class="menu-input">                    <input type="text" placeholder="请输入子菜单名称" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].name" @input="checkMenuName(menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].name)">                    <p class="menu-tips" style="color:#e15f63" v-show="menuNameBounds">字数超过上限</p>                    <p class="menu-tips">字数不超过8个汉字或16个字母</p>                </div>            </div>            <div class="menu-input-group">                <div class="menu-label">子菜单内容</div>                <div class="menu-input">                    <select v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].type" name="type" class="menu-input-text">                        <option value="text">普通文本(text)</option>                        <option value="view">跳转网页(view)</option>                        <option value="media_id">发送消息(media_id)</option>                        <option value="view_limited">跳转公众号图文消息链接(view_limited)</option>                        <option value="miniprogram">打开指定小程序(miniprogram)</option>                        <option value="click">自定义点击事件(click)</option>                    </select>                </div>            </div>            <div class="menu-content" v-if="selectedMenuType()=='text'">                <div class="menu-input-group">                    <p class="menu-tips">请输入要发送的内容</p>                    <div class="menu-label">内容</div>                    <div class="menu-input">                        <textarea @input="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].key = 'text:'+menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].buttonId"  class="layui-textarea" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].content" autocomplete="off"></textarea>                    </div>                </div>            </div>            <div class="menu-content" v-if="selectedMenuType()==1">                <div class="menu-input-group">                    <p class="menu-tips">订阅者点击该子菜单会跳到以下链接</p>                    <div class="menu-label">页面地址</div>                    <div class="menu-input">                        <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].url">                    </div>                </div>            </div>            <div class="menu-msg-content" v-else-if="selectedMenuType()==2">                <div class="menu-msg-head"><i class="icon_msg_sender"></i>图文消息</div>                <div class="menu-msg-panel">                    <div class="menu-msg-select" style="cursor: pointer;" v-if="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].media_id==''||menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].media_id==undefined" @click="selectMaterialId">                        <i class="icon36_common add_gray"></i>                        <strong>从素材库中选择</strong>                    </div>                    <div class="menu-msg-select" v-else>                        <i class="icon_msg_sender"></i>{{menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].materialTitle}}                        <a :href="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].materialUrl" target="_blank" class="btn btn-sm btn-info">查看</a>                        <div class="btn btn-sm btn-danger" @click="delMaterialId">删除</div>                    </div>                </div>            </div>            <div class="menu-content" v-else-if="selectedMenuType()==3">                <div class="menu-input-group">                    <p class="menu-tips">用于消息接口推送，不超过128字节</p>                    <div class="menu-label">菜单KEY值</div>                    <div class="menu-input">                        <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].key">                    </div>                </div>            </div>            <div class="menu-content" v-else-if="selectedMenuType()==4">                <div class="menu-input-group">                    <p class="menu-tips">订阅者点击该子菜单会跳到以下小程序</p>                    <div class="menu-label">小程序APPID</div>                    <div class="menu-input">                        <input type="text" placeholder="小程序的appid（仅认证公众号可配置）" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].appid">                    </div>                </div>                <div class="menu-input-group">                    <div class="menu-label">小程序路径</div>                    <div class="menu-input">                        <input type="text" placeholder="小程序的页面路径 pages/Index/index" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].pagepath">                    </div>                </div>                <div class="menu-input-group">                    <div class="menu-label">备用网页</div>                    <div class="menu-input">                        <input type="text" placeholder="" class="menu-input-text" v-model="menu.button[selectedMenuIndex].sub_button[selectedSubMenuIndex].url">                        <p class="menu-tips">旧版微信客户端无法支持小程序，用户点击菜单时将会打开备用网页。</p>                    </div>                </div>            </div>        </div>    </div>    <div class="weixin-btn-group">        <div id="btn-save" class="btn btn-success">保存</div>        <div id="btn-create" class="btn btn-success">保存并发布</div>        <div id="btn-clear" class="btn btn-danger">清空</div>    </div></div><div id="material-list" style="display: none;">    <table id="material-table" class="table table-responsive table-bordered">        <thead>        <tr>            <th>素材名称</th>            <th width="130">操作</th>        </tr>        </thead>        <tbody></tbody>    </table></div><script src="/plugin/wx/js/jquery-1.12.3.min.js"></script><script src="/plugin/wx/js/vue.js"></script><script src="/plugin/wx/js/template-web.js"></script><script src="/plugin/wx/js/layer/layer.js"></script><script>    var that=this    var util = app;    //Vue    var app = new Vue({        el: '#app-menu',        data: {            weixinTitle: '公众号菜单',            menu: {'button': []},//当前菜单            selectedMenuIndex:'',//当前选中菜单索引            selectedSubMenuIndex:'',//当前选中子菜单索引            menuNameBounds:false,//菜单长度是否过长            material:{                title:'',                url:'',                thumb_url:''            }        },        mounted:function(){            this.getMenu()        },        methods: {            buildTbleSel:function(){                layui.use(['tableSelect'],function(){                    var tableSelect = layui.tableSelect;                    tableSelect.render({                        elem: '#demo',	//定义输入框input对象                        checkedKey: 'id', //表格的唯一建值，非常重要，影响到选中状态 必填                        searchKey: 'keyword',	//搜索输入框的name值 默认keyword                        searchPlaceholder: '关键词搜索',	//搜索输入框的提示文字 默认关键词搜索                        table: {	//定义表格参数，与LAYUI的TABLE模块一致，只是无需再定义表格elem                            url:'/admin/wxtext/getWxtextList?page=1&limit=10',                            cols: [[                                { type: 'radio' },                                { field: 'textId', title: 'ID', width: 100 ,hide:true},                                { field: 'content', title: '文本', edit: 'text'},                            ]]                        },                        done: function (elem, data) {                            //选择完后的回调，包含2个返回值 elem:返回之前input对象；data:表格返回的选中的数据 []                            //拿到data[]后 就按照业务需求做想做的事情啦~比如加个隐藏域放ID...                            data = (data.data)[0];                            Vue.set(app.menu.button[app.selectedMenuIndex].sub_button[app.selectedSubMenuIndex],'type','click')                            Vue.set(app.menu.button[app.selectedMenuIndex].sub_button[app.selectedSubMenuIndex],'key',data.id)                            Vue.set(app.menu.button[app.selectedMenuIndex].sub_button[app.selectedSubMenuIndex],'content',data.content)                        }                    })                })            },            getMenu:function(){                var _this=this                request.fetch("/admin/wxmenu/getWxmenuDetail").then(res=>{                    console.log(JSON.stringify(res))                    if(res.length>0){                        _this.menu.button = res;                        _this.selectedMenuIndex = 0;                    }                })            },            //选中主菜单            selectedMenu:function(i,event){                this.selectedSubMenuIndex=''                this.selectedMenuIndex=i                var selectedMenu=this.menu.button[this.selectedMenuIndex]                //清空选中media_id 防止再次请求                if(selectedMenu.media_id!=undefined&&selectedMenu.media_id!=''&&this.selectedMenuType()==2){                    this.getMaterial(selectedMenu.media_id)                }                //检查名称长度                this.checkMenuName(selectedMenu.name)            },            //选中子菜单            selectedSubMenu:function(i,event){                this.selectedSubMenuIndex=i                var selectedSubMenu=this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex]                if(selectedSubMenu.media_id!=undefined&&selectedSubMenu!=''&&this.selectedMenuType()==2){                    this.getMaterial(selectedSubMenu.media_id)                }                this.checkMenuName(selectedSubMenu.name)            },            //选中菜单级别            selectedMenuLevel: function () {                if (this.selectedMenuIndex !== '' && this.selectedSubMenuIndex === '') {                    //主菜单                    return 1;                }else if (this.selectedMenuIndex !== '' && this.selectedSubMenuIndex !== '') {                    //子菜单                    return 2;                }else {                    //未选中任何菜单                    return 0;                }            },            //获取菜单类型 1. view网页类型，2. media_id类型和view_limited类型 3. click点击类型，4.miniprogram表示小程序类型            selectedMenuType: function () {                if (this.selectedMenuLevel() == 1&&this.menu.button[this.selectedMenuIndex].sub_button.length==0) {                    //主菜单                    switch (this.menu.button[this.selectedMenuIndex].type) {                        case 'text':return 'text';                        case 'view':return 1;                        case 'media_id':return 2;                        case 'view_limited':return 2;                        case 'click':return 3;                        case 'scancode_push':return 3;                        case 'scancode_waitmsg':return 3;                        case 'pic_sysphoto':return 3;                        case 'pic_photo_or_album':return 3;                        case 'pic_weixin':return 3;                        case 'location_select':return 3;                        case 'miniprogram':return 4;                    }                } else if (this.selectedMenuLevel() == 2) {                    //子菜单                    switch (this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex].type) {                        case 'text':return 'text';                        case 'view':return 1;                        case 'media_id':return 2;                        case 'view_limited':return 2;                        case 'click':return 3;                        case 'scancode_push':return 3;                        case 'scancode_waitmsg':return 3;                        case 'pic_sysphoto':return 3;                        case 'pic_photo_or_album':return 3;                        case 'pic_weixin':return 3;                        case 'location_select':return 3;                        case 'miniprogram':return 4;                    }                } else {                    return 1;                }            },            //添加菜单            addMenu:function(level){                if(level==1&&this.menu.button.length<3){                    var buttonIndex;                    if(util.isEmpty(this.menu.button)){                        buttonIndex=0                    }else{                        buttonIndex = this.menu.button.length;                    }                    var button = {                        "type": "view",                        "name": "菜单名称",                        "url":"",                        "tier":level,                        "buttonIndex":buttonIndex                    }                    request.post("/admin/wxmenu/editWxmenu",button,'json').then(res=>{                        console.log(JSON.stringify(res));                        this.menu.button.push(res);                        this.selectedMenuIndex=this.menu.button.length-1;                        this.selectedSubMenuIndex='';                        util.success("操作成功！");                    })                }                if(level==2&&this.menu.button[this.selectedMenuIndex].sub_button.length<5){                    var buttonIndex;                    if(util.isEmpty(this.menu.button[this.selectedMenuIndex].sub_button)){                        buttonIndex = 0                    }else{                        buttonIndex = this.menu.button[this.selectedMenuIndex].sub_button.length;                    }                    var button = {                        "type": "view",                        "name": "子菜单名称",                        "url":"",                        "tier":level,                        "buttonIndex":buttonIndex,                        "parentId":this.menu.button[this.selectedMenuIndex].buttonId                    }                    request.post("/admin/wxmenu/editWxmenu",button,'json').then(res=>{                        console.log(JSON.stringify(res));                        this.menu.button[this.selectedMenuIndex].sub_button.push(res)                        this.selectedSubMenuIndex=this.menu.button[this.selectedMenuIndex].sub_button.length-1                        util.success("操作成功！");                    })                }            },            //删除菜单            delMenu:function(buttonId,tier){                if(confirm('删除后菜单下设置的内容将被删除')){                    request.post("/admin/wxmenu/delWxmenu",{buttonId:buttonId,tier,tier}).then(res=>{                        dodel();                    })                }                var dodel = function () {                    if(app.selectedMenuLevel()==1){                        if(app.selectedMenuIndex===0){                            app.menu.button.splice(app.selectedMenuIndex, 1);                            app.selectedMenuIndex = 0;                        }else{                            app.menu.button.splice(app.selectedMenuIndex, 1);                            app.selectedMenuIndex -=1;                        }                        if(app.menu.button.length==0){                            app.selectedMenuIndex = ''                        }                    }else if(app.selectedMenuLevel()==2){                        if(app.selectedSubMenuIndex===0){                            app.menu.button[app.selectedMenuIndex].sub_button.splice(app.selectedSubMenuIndex, 1);                            app.selectedSubMenuIndex = 0;                        }else{                            app.menu.button[app.selectedMenuIndex].sub_button.splice(app.selectedSubMenuIndex, 1);                            app.selectedSubMenuIndex -= 1;                        }                        if(app.menu.button[app.selectedMenuIndex].sub_button.length==0){                            app.selectedSubMenuIndex = ''                        }                    }                }            },            //检查菜单名称长度            checkMenuName:function(val){                if(this.selectedMenuLevel()==1&&this.getMenuNameLen(val)<=8){                    this.menuNameBounds=false                }else if(this.selectedMenuLevel()==2&&this.getMenuNameLen(val)<=16){                    this.menuNameBounds=false                }else{                    this.menuNameBounds=true                }            },            //获取菜单名称长度            getMenuNameLen: function (val) {                var len = 0;                for (var i = 0; i < val.length; i++) {                    var a = val.charAt(i);                    a.match(/[^\x00-\xff]/ig) != null?len += 2:len += 1;                }                return len;            },            //选择公众号素材库素材            selectMaterialId:function(){                layer.open({                    type: 1,                    title:'选择素材',                    area: ['900px', '600px'], //宽高                    content: $('#material-list'),                    scrollbar: false,                    success:function(){                        if($('#material-list').find('tbody').children().length==0){                            getMaterialList()                        }                    }                });            },            //设置选择的素材id            setMaterialId:function(id,title,url){                console.log(this.selectedMenuLevel());                if(this.selectedMenuLevel()==1){                    Vue.set(this.menu.button[this.selectedMenuIndex],'media_id',id)                    Vue.set(this.menu.button[this.selectedMenuIndex],'materialTitle',title)                    Vue.set(this.menu.button[this.selectedMenuIndex],'materialUrl',url)                }else if(this.selectedMenuLevel()==2){                    Vue.set(this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex],'media_id',id)                    Vue.set(this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex],'materialTitle',title)                    Vue.set(this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex],'materialUrl',url)                }                layer.close(layer.index);            },            //删除选择的素材id            delMaterialId:function(){                if(this.selectedMenuLevel()==1){                    this.menu.button[this.selectedMenuIndex].media_id=''                }else if(this.selectedMenuLevel()==2){                    this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex].media_id=''                }            },            //设置选择的图文链接            setNewsUrl:function(url){                if(this.selectedMenuLevel()==1){                    Vue.set(this.menu.button[this.selectedMenuIndex],'url',url)                }else if(this.selectedMenuLevel()==2){                    Vue.set(this.menu.button[this.selectedMenuIndex].sub_button[this.selectedSubMenuIndex],'url',url)                }                layer.close(layer.index);            },            //获取素材信息            getMaterial:function(id){                var _this=this                $.ajax({                    type: 'GET',                    timeout: 20000,                    url:getMaterialAPI,                    data:{                        'media_id':id                    },                    async: false,                    dataType: 'json',                    success: function (res) {                        if (res.errcode == 0) {                            _this.material.title=res.data.news_item[0].title                            _this.material.url=res.data.news_item[0].url                        }                    }                })            }        }    })    $('#btn-save').click(function(){        request.post("/admin/wxmenu/saveButton",JSON.stringify(app.menu.button),'json').then(res=>{            util.success("操作成功！");        })    })    //发布菜单    $('#btn-create').click(function(){        request.post("/admin/wxmenu/updateMenu",{list:JSON.stringify(app.menu.button),menu:JSON.stringify(app.menu)}).then(res=>{            util.success("发布成功！");        })    })    //清空菜单    $('#btn-clear').click(function(){        if(!confirm('确定后将清空后公众号自定义菜单')){            return false;        }    })    //获取素材列表    function getMaterialList(offset){        $.ajax({            type: 'GET',            timeout: 20000,            url:"/admin/wxmenu/getWxResource",            async: false,            dataType: 'json',            success: function (res) {                console.log(res);                if (res.code == 200) {                    var html=template('material-tpl',res.data)                    console.log(JSON.stringify(res.data));                    $('#material-table').find('tbody').append(html)                    that.materialListOffset+=res.data.item_count;                    that.materialListTotal+=res.data.total_count;                }            }        })    }</script><script id="material-tpl" type="text/html">    {{each items v k}}    <tr>        <td>            <ul>                {{each v.content.articles v2 k2}}                <li><a href="{{v2.url}}" target="_blank">{{k2+1}}. {{v2.title}}</a>                </li>                {{/each}}            </ul>        </td>        <td>            <button onclick="app.setMaterialId('{{v.mediaId}}','{{v.content.articles[0].title}}','{{v.content.articles[0].url}}')" class="btn btn-primary">选择</button>        </td>    </tr>    {{/each}}</script></body></html>