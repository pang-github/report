<% layout("/common/_container.html"){ %><div class="layui-fluid" id="app">    <div class="layui-card" style="max-width: 60%;margin:30px auto;">        <div class="layui-card-body" >            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 35px;">                <legend>药物表</legend>            </fieldset>            <form class="layui-form" lay-filter="drugForm" style="margin: 35px 0 30px 20%;">                    <input type="hidden" id="upid" name="id">                    <div class="layui-form-item">                        <label class="layui-form-label">药品编号</label>                        <div class="layui-input-inline">                            <input name="drugNum" type="text" placeholder="请输入药品编号" class="layui-input" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">药品名称<span style="color: red;">*</span></label>                        <div class="layui-input-inline">                            <input name="drugName" type="text" placeholder="请输入药品名称" class="layui-input" lay-verify="required" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">药品单位</label>                        <div class="layui-input-inline">                            <input name="drugUnit" type="text" placeholder="请输入药品单位" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">生产厂商</label>                        <div class="layui-input-inline">                            <input name="manufacturer" type="text" placeholder="请输入生产厂商" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">药品价格<span style="color: red;">*</span></label>                        <div class="layui-input-inline">                            <input id="drugPrice" name="drugPrice" v-model="info.drugPrice" autocomplete="off" type="text" oninput="app.clearNoNum(this)" placeholder="请输入药品价格" class="layui-input " lay-verify="required" />                        </div>                    </div>                    <div  class="layui-form-item">                            <label class="layui-form-label">加价后价格</label>                            <div  class="layui-input-inline">                                <input name="upprice"  style="color: #FF0000" v-model="info.upprice" type="text" oninput="app.clearNoNum(this)" placeholder="请输入加价后价格" class="layui-input " lay-verify="" />                            </div>                        </div>                    <div class="layui-form-item">                        <label class="layui-form-label">药品说明</label>                        <div class="layui-input-inline">                            <textarea name="drugExplain" type="text" placeholder="请输入药品说明" class="layui-textarea" lay-verify="" ></textarea>                        </div>                    </div>                    <div class="layui-form-item" style="margin:28px 30px;">                        <div class="layui-input-block">                            <button type="button" class="layui-btn" lay-filter="drugForm" lay-submit>提交</button>                            <button type="button" class="layui-btn layui-btn-primary" @click="back">返回</button>                        </div>                    </div>            </form>        </div>    </div></div><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:{},            page:'',        },        computed:{            getNewPrice:function () {                 var drugPrice = vm.info.drugPrice;                 var multiple =  '${multiple}';                 if(app.isNotEmpty(multiple)){                     var addUpprice = app.accMul(drugPrice,app.accDiv(multiple,100));                     drugPrice = app.accAdd(addUpprice,drugPrice);                 }                 return drugPrice;            }        },        methods: {            getDetail:async function(id){                vm.info = await request.fetch("getDrugDetail",{id:id});                form.val('drugForm', vm.info);            },            back:function(){                location.href = 'drug_list?page='+vm.page            },            getDic:async function(){                 var data = {                 }                 var res = await api.getDictList(data);            }        },        mounted:async function() {            layuiUtil.numinput();            vm = this;            var id = app.getUrlParam('id');            var page = app.getUrlParam('page');            vm.page = page            await vm.getDic();            app.isNotEmpty(id) && await vm.getDetail(id);            form.on('submit(drugForm)', function (data) {                request.post("editDrug",data.field).then(res=>{                    app.success("操作成功！");                    location.href = 'drug_list?page='+page                })                return false;            });            form.render();        },        updated: function () {            form.render();        }    })</script><% } %><style>    .layui-input-inline{        min-width:350px !important;    }</style>