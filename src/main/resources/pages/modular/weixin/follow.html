<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>随访</title>    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />    <meta content="yes" name="apple-mobile-web-app-capable">    <meta content="black" name="apple-mobile-web-app-status-bar-style">    <meta content="telephone=no" name="format-detection">    <link rel="stylesheet" href="/plugin/weui/css/weui.css"/>    <link rel="stylesheet" href="/plugin/weui/css/weuix.css"/>    <script src="/plugin/weui/js/jquery.min.js"></script>    <script src="/plugin/weui/js/zepto.min.js"></script>    <script src="/plugin/weui/js/zepto.weui.js"></script>    <script src="/modular/weixin/auth.js"></script></head><body><div style="padding-top: 20px;" id="app"><template v-for="item in tplList">    <div class="weui-cells__title">{{item.title}}</div>    <template v-if="item.type==1">        <div class="weui-cells">            <div class="weui-cell">                <div class="weui-cell__bd">                    <input class="weui-input" type="text" placeholder="请输入" v-model="item.answer">                </div>            </div>        </div>    </template>    <template v-if="item.type==2">        <div class="weui-cells weui-cells_checkbox">            <label class="weui-cell weui-check__label" v-for="(radio,index) in item.option">                <div class="weui-cell__hd">                    <input type="radio" class="weui-check" name="checkbox1" :checked="radio.ischecked" @change="changeInput(index,item.option)">                    <i class="weui-icon-checked"></i>                </div>                <div class="weui-cell__bd">                    <p>{{radio.option}}</p>                </div>            </label>        </div>    </template>    <template v-if="item.type==3">        <div class="weui-cells weui-cells_radio">            <label class="weui-cell weui-check__label" v-for="checkbox in item.option">                <div class="weui-cell__bd">                    <p>{{checkbox.option}}</p>                </div>                <div class="weui-cell__ft">                    <input type="checkbox" class="weui-check" v-model="checkbox.ischecked">                    <span class="weui-icon-checked"></span>                </div>            </label>        </div>    </template>    <template v-if="item.type==4">        <div class="weui-cells">            <div class="weui-cell weui-cell_select">                <div class="weui-cell__bd">                    <select class="weui-select" name="select1" v-model="item.answer">                        <option >请选择</option>                        <option :value="select"  v-for="select in item.option">{{select}}</option>                    </select>                </div>            </div>        </div>    </template>    <template v-if="item.type==5">        <div class="weui-cells weui-cells_form">            <div class="weui-cell">                <div class="weui-cell__bd">                    <textarea class="weui-textarea" id="weui-textarea" onkeyup="astrict()"  placeholder="请输入" maxlength="200" rows="3"  v-model="item.answer"></textarea>                    <div class="weui-textarea-counter"><span id="astrict-sl">0</span>/200</div>                </div>            </div>        </div>    </template></template><div style="padding:10px;" v-if="!(isDoctor=='true')">    <a href="javascript:;" class="weui-btn weui-btn_primary" @click="submit">        <template v-if="!result">提 交</template><template v-else>修 改</template>    </a></div></div><script src="/plugin/vue/vue.min.js"></script><script src="/modular/js/weui_util.js"></script><script>    //限制数字    function astrict(){        var tarea=document.getElementById("weui-textarea");        var maxlength=200;        var length=tarea.value.length;        var count=maxlength-length;        var sp=document.getElementById("astrict-sl");        sp.innerHTML=count;        if(count<=25){            sp.style.color="red";        }else{            sp.removeAttribute("style");        }    }    var vm = new Vue({        el: '#app',        data: {            isDoctor:'',            msg: 'hello world',            content:'${content}',            result:'${result}',            tplList:[]        },        methods: {            changeInput(index,list) {                console.log(list);                list.map((v, i) => {                    if (i == index) {                        v.ischecked = true                    } else {                        v.ischecked= false                    }                })            },            submit:function () {                var url = weUtil.post("/weixin/followSub",{detailId:weUtil.getUrlParam("detailId"),                result:JSON.stringify(vm.tplList)},function (res) {                    window.location.href = "/weixin"                    weUtil.msg("填写完成");                })            }        },        mounted:async function() {            vm = this;            if(weUtil.isNotEmpty(vm.result)){                vm.tplList = JSON.parse(vm.result)            }else if(weUtil.isNotEmpty(vm.content)){                vm.tplList = JSON.parse(vm.content)            }            vm.isDoctor = weUtil.getCookie("isDoctor");        },        updated: function () {        }    })</script></body></html>