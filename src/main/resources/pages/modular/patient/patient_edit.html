<% layout("/common/_container.html"){ %><div class="layui-fluid" id="app">    <div class="layui-card" style="max-width: 60%;margin:30px auto;">        <div class="layui-card-body" >            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 35px;">                <legend>患者表</legend>            </fieldset>            <form class="layui-form" lay-filter="patientForm" style="margin: 35px 0 30px 20%;">                    <input type="hidden" name="id">                    <div class="layui-form-item">                        <label class="layui-form-label">患者姓名<span style="color: red;">*</span></label>                        <div class="layui-input-inline">                            <input name="patientName" type="text" placeholder="请输入患者姓名" class="layui-input" lay-verify="required|" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">电话号码<span style="color: red;">*</span></label>                        <div class="layui-input-inline">                            <input name="phoneNumber" type="text" placeholder="请输入电话号码" class="layui-input" lay-verify="required" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者性别</label>                        <div class="layui-input-inline">                             <input type="radio" name="patientSex" value="1" title="男" checked>                             <input type="radio" name="patientSex" value="2" title="女">                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者分类</label>                        <div class="layui-input-inline">                            <select name="patientType" lay-search lay-filter="patientType" lay-verify="">                                <option></option>                                <option v-for="item in patientTypeDic" :value="item.dictId">{{item.name}}</option>                            </select>                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者年龄</label>                        <div class="layui-input-inline">                            <input name="patientAge" type="text" placeholder="请输入患者年龄" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者职业</label>                        <div class="layui-input-inline">                            <input name="patientProfession" type="text" placeholder="请输入患者职业" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者籍贯</label>                        <div class="layui-input-inline">                            <input name="patientOrigo" type="text" placeholder="请输入患者籍贯" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">患者民族</label>                        <div class="layui-input-inline">                             <select name="patientNation" lay-search lay-filter="patientNation" lay-verify="">                               <option></option>                               <option v-for="item in patientNationDic" :value="item.dictId">{{item.name}}</option>                             </select>                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">工作单位</label>                        <div class="layui-input-inline">                            <input name="workUnit" type="text" placeholder="请输入工作单位" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">住址</label>                        <div class="layui-input-inline">                             <textarea name="address" placeholder="请输入住址" class="layui-textarea" lay-verify="" ></textarea>                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">入院时间</label>                        <div class="layui-input-inline">                            <input id="admissionTime" name="admissionTime" type="text" readonly placeholder="请选择入院时间" autocomplete="off" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">病例采集者</label>                        <div class="layui-input-inline">                            <select name="blcjz" lay-search  lay-verify="">                                <option></option>                                <option v-for="item in doctorList" :value="item.userId">{{item.realName}}</option>                            </select>                        </div>                    </div>                    <div class="layui-form-item">                        <label class="layui-form-label">婚姻</label>                        <div class="layui-input-inline">                             <select name="marriage" lay-search lay-filter="marriage" lay-verify="">                               <option></option>                               <option v-for="item in marriageDic" :value="item.dictId">{{item.name}}</option>                             </select>                        </div>                    </div>                    <!--<div class="layui-form-item">                        <label class="layui-form-label">创建时间</label>                        <div class="layui-input-inline">                            <input name="createTime" type="text" placeholder="请输入创建时间" class="layui-input" lay-verify="" />                        </div>                    </div>-->                    <div class="layui-form-item" style="margin:28px 30px;">                        <div class="layui-input-block">                            <button type="button" class="layui-btn" lay-filter="patientForm" lay-submit>提交</button>                            <button type="button" class="layui-btn layui-btn-primary" @click="back">返回</button>                        </div>                    </div>            </form>        </div>    </div></div><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:{},            patientNationDic:[],            marriageDic:[],            patientTypeDic:[],            doctorList:''        },        computed:{        },        methods: {            getdoctor:async function(){                vm.doctorList = await request.fetch("/admin/user/getallUserList");            },            getDetail:async function(id){                vm.info = await request.fetch("getPatientDetail",{id:id});                form.val('patientForm', vm.info);            },            back:function(){                location.href = 'patient_list';            },            getDic:async function(){                 var data = {                     patientType:'9ae86115b7f4d79b2d8dfa5a381c6bdc',                     patientNation:'92395206b9178d57bdaded66674b888c',                     marriage:'9697b6e46ab6995bb11c30f60f6dca77',                 }                 var res = await api.getDictList(data);                 vm.patientTypeDic = res.patientType;                 vm.patientNationDic = res.patientNation;                 vm.marriageDic = res.marriage;            }        },        mounted:async function() {            vm = this;            var id = app.getUrlParam('id');            await vm.getDic();            await vm.getdoctor();            laydate.render({                elem: '#admissionTime',                type: "datetime"            });            app.isNotEmpty(id) && await vm.getDetail(id);            form.on('submit(patientForm)', function (data) {                request.post("editPatient",data.field).then(res=>{                    app.success("操作成功！");                    location.href = 'patient_list'                })                return false;            });            form.render();        },        updated: function () {            form.render();        }    })</script><% } %><style>    .layui-input-inline{        min-width:350px !important;    }</style>