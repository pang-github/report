package com.sweet.core.exception;import com.sweet.core.exception.enums.BizExceptionEnum;import com.sweet.core.model.ResultBean;import com.sweet.core.model.ResultError;import com.sweet.core.util.HttpContext;import lombok.extern.slf4j.Slf4j;import org.apache.shiro.authz.AuthorizationException;import org.apache.shiro.web.util.WebUtils;import org.beetl.ext.fn.StringUtil;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.core.annotation.Order;import org.springframework.http.HttpStatus;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.bind.annotation.ResponseStatus;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.sql.SQLException;import java.sql.SQLSyntaxErrorException;import java.util.HashMap;import java.util.Map;@ControllerAdvice@Order(-1)@Slf4jpublic class ControllerExceptionHandler {    @Autowired    HttpServletRequest request;    @Autowired    HttpServletResponse response;    @ExceptionHandler(AuthorizationException.class)    public String handleAuthorizationException() {        return "/unauthorized";    }    /*     * 拦截业务异常     */    @ExceptionHandler(ServiceException.class)    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ResponseBody    public ResultBean bussiness(ServiceException e) {        e.printStackTrace();        return new ResultError(e.getCode(), e.getMessage());    }    @ExceptionHandler(SQLSyntaxErrorException.class)    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ResponseBody    public ResultBean SQLSyntaxErrorException(SQLSyntaxErrorException e) {        e.printStackTrace();        return ResultBean.error("数据异常，请联系管理员！");    }    @ExceptionHandler(SQLException.class)    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)    @ResponseBody    public ResultBean SQLSyntaxErrorException(SQLException e) {        e.printStackTrace();        return ResultBean.error("数据异常，请联系管理员！");    }}