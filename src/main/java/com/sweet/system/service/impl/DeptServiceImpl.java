package com.sweet.system.service.impl;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.sweet.core.model.system.LayuiPageFactory;import com.sweet.core.model.system.LayuiPageInfo;import com.sweet.core.model.system.layTree;import com.sweet.system.entity.Dept;import com.sweet.system.mapper.DeptMapper;import com.sweet.system.service.DeptService;import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;import org.springframework.stereotype.Service;import java.util.ArrayList;/** * <p> * 部门表 服务实现类 * </p> * * @author wxl * @since 2019-11-28 */@Servicepublic class DeptServiceImpl extends ServiceImpl<DeptMapper, Dept> implements DeptService {    @Override    public ArrayList<layTree> deptTree() {        return baseMapper.deptTree();    }    @Override    public String getPIds(String deptId) {        return baseMapper.selectById(deptId).getParentIds();    }    @Override    public Dept addDept(String deptId) {            Dept dept = new Dept();            dept.setDeptName("未命名");            dept.setParentId(deptId);            if("0".equals(deptId)){                dept.setParentIds(deptId);            }else{               String pids = getPIds(deptId)+","+deptId;                dept.setParentIds(pids);            }            this.save(dept);            return dept;    }    @Override    public LayuiPageInfo findPageBySpec(Dept Dept) {        Page pageContext = getPageContext();        IPage page = this.baseMapper.customPageList(pageContext, Dept);        return LayuiPageFactory.createPageInfo(page);    }    @Override    public Integer getDeptUserCount(String deptId) {        return baseMapper.getDeptUserCount(deptId);    }    private Page getPageContext() {        return LayuiPageFactory.defaultPage();    }}